{{> _msg }}
<div id="colorlib-container">
    <div class="container">

        <div class="box1">
            <div class="col-md-12" style="padding: 0.5em 0.5em 0 0.5em !important;">
                <div class="row row-pb-md">

                    <div class="col-md-12">
                        <h1 class="font_color"><b>Edit Food Item</b></h1>
                        <hr>
                    </div>

                    <form method="POST" style="width:100%">
                        <div class="row form-group" style="margin:0;">

                            <div class="col-md-6" style="margin-bottom:2em;">
                                <label>Food Image</label><br>
                                <img src="{{food.imageLocation}}" id="venImage" class="img-responsive shopImage"
                                    alt="Image">
                                <input type="file" id="venUpload" name="venUpload"
                                    accept="image/png,image/jpeg,image/jpg,image/gif">
                                <input id="imageURL" type="hidden" name="imageURL" value="{{food.imageLocation}}">
                            </div>

                            <div class="col-md-6">
                                <div class="desc">
                                    <p class="meta">
                                        <label>Name of Food</label>
                                        <input name="name" id="name" type="text" class="form-control" value="{{food.name}}" placeholder="Name" required>
                                        <label>Calories</label>
                                        <input name="calories" id="calories" type="number" class="form-control" value="{{food.calories}}" placeholder="Calories" required>
                                        <br>
                                        <h4 class="font_color"><b>Shop</b></h4>
                                        <hr>
                                        <input name="shopId" id="shopId" type="hidden" value="{{currentShop.id}}">
                                        <input name="shopName" id="shopName" type="text" class="form-control" value="{{currentShop.name}}" placeholder="vendor"
                                            readonly>
                                    </p>
                                </div>
                                <button type="submit" name="action" value="Edit Food" class="btn btn-primary btn-tall" id="editFoodButton" style="float:right" disabled>Edit
                                    Food</button>
                                </form>
                                <form method="POST" action="/admin/deleteFoodItem/{{food.id}}" style="width:100%">
                                    <button type="submit" name="action" value="Delete Food" class="btn btn-danger btn-tall" style="float:right">Delete
                                        Food</button>
                                </form>
                            </div>

                        </div>
                </div>
                <br>
            </div>
        </div>

    </div>
</div>

<script>
    var oldElem = [], newElem = [];

    $('.form-control').each(function () {
        elem = $(this);
        oldElem.push(elem.val());
    });

    $('.form-control')
    .bind("propertychange change click keyup input paste", function (event) {
        newElem = [];
        $('.form-control').each(function () {
            var elem = $(this);
            newElem.push(elem.val());
        });

        if (JSON.stringify(oldElem) != JSON.stringify(newElem)) {
            $("#editFoodButton").attr("disabled", false);
        } else {
            $("#editFoodButton").attr("disabled", true);
        }
    });
</script>